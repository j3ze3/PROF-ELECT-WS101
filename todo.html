<!DOCTYPE html>
<html lang="en">
    <script src="./assets/js/vue.js"></script>
    <head>
        <meta charset="UTF-8">
        <title>TODO LIST</title>
        <!-- Materialize CSS -->
    <link rel="stylesheet" href="./assets/css/materialize.min.css">
    <!-- Material Font -->
    <link rel="stylesheet" href="./assets/css/material-font.css">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
		<link rel="stylesheet" href="./assets/css/todo.css">
		<link rel="stylesheet" href="./assets/css/login.css">
        <script src="./assets/js/vue.js"></script>
    
    </head>
    <body>
	<div class="container">
    <nav>
        <div class="nav-wrapper grey darken-2">
          <ul>
           <ul class="left hide-on-med-and-down">
            <li><a href="./index.html">&nbsp&nbspHome&nbsp&nbsp</a></li>
            <li><a href="./Profile.html">&nbsp&nbspProfile&nbsp&nbsp</a></li>
            <li><a href="blog.html">&nbsp&nbsp&nbspBlog&nbsp&nbsp&nbsp&nbsp</a></li>
            <li class="active"><a href="./todo.html">&nbsp&nbsp&nbspTodo&nbsp&nbsp&nbsp&nbsp</a></li>
            
          </ul> 
    
    
    
          <ul class="right hide-on-med-and-down">
           <li><nav>
          <form>
            <div class="right input-field grey">
              <input id="search" placeholder="Search" type="search" required>
              <label class="label-icon" for="search"><i class="material-icons">search</i></label>
              <i class="material-icons">close</i>
            </div>
          </form>
        </nav></li>
            <li><a href="#login" class="waves-effect waves-light   modal-trigger"><i class="material-icons right">fingerprint</i>&nbsp&nbsp&nbsp&nbspLogin&nbsp&nbsp&nbsp</a>
            </li>
          </ul>
        </div>
    
      </nav>

    <div id="app" class="">
		<div id="header">
			<nav>
				<div class="nav-wrapper grey darken-3">
					<div class="row">
						<div class="col s12">
							<a href="#" class="brand-logo center">TODO LIST</a>
						</div>			
					</div>
				</div>
			</nav>
			<ul id="tabs-swipe" class="tabs center z-depth-1">
				<li class="tab active"><a href="#tab-tasks">tasks</a></li>
			  	<li class="tab"><a href="#tab-completed">Completed</a></li>
			</ul>
		</div>
		<div class="white container">
			<div id="tab-tasks">
				    <div class="input-field">
				        <input onfocus="this.value=''" v-model="itemName" placeholder="ENTER TODO HERE" @keydown.enter="addToList()">
				    </div>
				<div class="collection">
					<uncompleted
						v-for="(item, index) in items"
						v-if="!item.done"
						v-bind:text="item.text"
						v-bind:done="item.done"
						v-bind:index="index"
						v-on:act-remove="removeFromList"
						v-on:act-update="updateStatus"
					></uncompleted>
				</div>
			</div>
			<div id="tab-completed">
				<div class="collection">
					<completed
					v-for="(item, index) in items"
					v-if="item.done"
					v-bind:text="item.text"
					v-bind:done="item.done"
					v-bind:index="index"
					v-on:act-remove="removeFromList"
					v-on:act-update="updateStatus"
					></completed>
				</div>
			</div>
		</div>
		
	</div>
	

<!--  Modal -->

<div id="login" class="modal ">
	<h5 class="modal-close">&#10005;</h5>
	<div class="modal-content center">
	  <h4>Login Form</h4>
	  <br>
  
	  <form action="#">
  
		<div class="input-field">
		  <i class="material-icons prefix">person</i>
		  <input type="text" id="name">
		  <label for="name">Username</label>
		</div>
		<br>
  
		<div class="input-field">
		  <i class="material-icons prefix">lock</i>
		  <input type="password" id="pass">
		  <label for="pass">Password</label>
		</div>
		<br>
  
		<div class="left" style="margin-left:20px;">
		   <label>
		  <input type="checkbox"/>
		  <span>Remember Me</span>
		</label>
  
		</div>
		<br>
		
		<input type="submit" value="Login" class="btn btn-large">
		
	  </form>
	</div>
  </div>
  <!--  Modal -->
	
    
    <!-- Footer -->

<footer class="grey darken-2 page-footer">
    <div class="grey darken-2 footer-copyright">
      <div class="container">
      Â© 2014 Copyright Allrights Reserved.
      <a class="grey-text text-lighten-4 right" href="#!">Jz Ambal</a>
      </div>
    </div>
  </footer>

<!-- Footer -->
</div>
<!-- Materialize initializatin -->
	<script src="./assets/js/jq.js"></script>
    <script>
        $(document).ready(function(){
          $('.tabs').tabs({
          	// swipeable : true
          });
        });
    </script>

<!-- Vue starts here! -->
	<script>
		Vue.component('uncompleted', {
			props: ['text', 'done', 'index', ],
			template: `
				<div class="collection-item">
					<label>
				    	<input id="checkbox" type="checkbox" v-on:click="$emit('act-update', index)">
				        <span>{{text}}</span>
				    </label>
				    <div v-on:click="$emit('act-remove', index)" class="secondary-content">
						<i class="material-icons red-text">close</i>
					</div>
				</div>				
			`
		})
		Vue.component('completed', {
			props: ['text', 'done', 'index'],
			template: `
				<div class="collection-item">
					<label>
				    	<input id="checkbox" type="checkbox" checked="unchecked" v-on:click="$emit('act-update', index)">
				        <span>{{text}}</span>
				    </label>
				    <div v-on:click="$emit('act-remove', index)" class="secondary-content">
						<i class="material-icons red-text">close</i>
					</div>
				</div>
			`
		})
		var app = new Vue({
			el: '#app',
			data: {
				itemName: '',
				checked: '',
				showCompleted: true,
				items: [
					{text: 'car', done: true},
					{text: 'coffee', done: true},
					{text: 'berry', done: false},
				]
			},
			methods: {
				addToList() {
					// var format = /[!@#$%^&*()_+\-=\[\]{};':"\\|,.<>\/?]+/;
					// if (format.test(this.itemName)) {
					// 	alert("You can't enter special characters");
					// 	this.itemName = '';
					// 	return;
					// }
					if (this.itemName.length > 30) {
						alert("You can't enter more than 30 characters");
						this.itemName = '';
						return;
					}
					if (this.itemName == '') {
						alert("Please enter something");
						this.itemName = '';
						return;
					} 
					else {
						let temp = {
							text: this.itemName,
							done: false
						};
						this.items.splice(0, 0, temp);
						this.itemName = '';
					}
				},
				removeFromList(index) {
					this.items.splice(index, 1);
				},
				updateStatus(index) {
					let oldStatus = this.items[index].done;
					this.items[index].done = !oldStatus;
				},
				toggleCompleted() {
					var s = document.getElementById("completed-switch").style;
					console.log(s.display)
				}
			},
			mounted() {
				console.log("App mounted")
				if (localStorage.getItem('items')) this.items = JSON.parse(localStorage.getItem('items'));
			},
			watch: {
				items: {
					handler() {
						console.log('Items changed!');
						localStorage.setItem('items', JSON.stringify(this.items));
					},
					deep: true,
				},
			},
		})
    </script>
    
    <!-- Material JS -->
    <script src="./assets/js/materialize.min.js"></script>
    <script src=./assets/js/js.js></script>
</body>

</html>